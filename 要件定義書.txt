RAGシステム開発 要件定義書
1. 概要

本システムは、社内で過去に実施されたオンラインMTGの議事録ファイルをもとに、社内ユーザーの入力に対して適切な回答を生成するRAG（Retrieval-Augmented Generation）システムを開発する。
議事録データはGoogleドライブ上の「オンラインMTG議事録」フォルダに格納され、システムはこれらを自動的にデータベース化（ベクターストア化）し、ユーザーの質問応答に活用する。

2. システム構成

入力データ: Googleドライブ上「オンラインMTG議事録」フォルダ内の .docx 形式議事録ファイル

出力: ユーザー入力に基づくLLMの回答（ストリーミング表示）

外部参照先: Googleドライブ上「オンラインMTG議事録」フォルダ

パス：/content/drive/MyDrive/オンラインMTG議事録

Colabからdrive.mount('/content/drive')で接続

3. フォルダ構成
オンラインMTG議事録
├─ 営業
│   ├─ データベース化前
│   │   └─ 営業.docx
│   └─ データベース化済み
├─ マーケティング
│   ├─ データベース化前
│   └─ データベース化済み
├─ 採用
├─ 開発
├─ 教育
├─ 全社
├─ 顧客
│   ├─ 見込み
│   │   └─ 〇〇株式会社
│   └─ 既存
│       └─ 〇〇株式会社
└─ .db  ← ベクターストア格納用


各テーマフォルダは「データベース化前」「データベース化済み」の2階層構造

.dbフォルダはベクターストアの格納先

.docxファイルのみ処理対象

.dbは初期状態で空

データベース化前フォルダには事前に .docx ファイルが格納済み

4. データベース化の仕様

議事録ファイルはまず「データベース化前」フォルダに手動で格納

プログラム実行時に以下を自動実施:

「データベース化前」にはあるが「データベース化済み」にないファイルを検出

該当ファイルをベクターストアへ追加

ファイルを「データベース化済み」にコピー

判定基準はファイル名の一致

初期段階では全議事録をデータベース化

5. ベクターストア仕様

保存先: 「オンラインMTG議事録/.db」フォルダ

作成内容:

全テーマ横断ベクターストア

名称: .all_chromadb

全テーマのファイルを格納

回答生成に使用

テーマ別ベクターストア

営業 → .営業_chromadb

マーケティング → .マーケティング_chromadb

採用 → .採用_chromadb

開発 → .開発_chromadb

教育 → .教育_chromadb

全社 → .全社_chromadb

顧客 → .顧客_chromadb

各テーマに関する質問時に活用予定

6. システム要件
No	要件	詳細
1	ファイル処理	データベース化前→データベース化済み へのコピー、自動データベース化
2	ベクターストア作成	.all_chromadb と .テーマ名_chromadb を作成
3	回答生成	全テーマ横断ベクターストアを用いてRAGで回答
4	入力例1	「多くの企業が力を入れているマーケティング施策は何ですか？」
5	入力例2	「100文字以内に要約して」
6	会話履歴保持	ユーザーとの履歴を保持し、文脈を考慮した回答
7	ストリーミング出力	回答はストリーミングで表示
8	ベクターストア分岐	既存ストアがあれば読み込み、なければ作成
9	リセット処理	.dbフォルダ、データベース化済みフォルダを空に戻すコード実装
10	ローダー	Docx2txtLoaderを使用
7. 開発環境

Google Colaboratory上で開発・実行

Google Drive APIで「マイドライブ」をマウント

主要ライブラリ: LangChain, ChromaDB, OpenAI API, docx2txt

8. 動作検証

.dbおよびデータベース化済みフォルダを空にリセット

システムを実行 → 全ファイルをベクターストア化

質問: 「多くの企業が力を入れているマーケティング施策は何ですか？」
→ 適切な回答が返る

質問: 「100文字以内に要約して」
→ 要約が正しく生成される

正常動作確認後、開発完了とする

9. 非機能要件

操作性: 手動作業は議事録ファイルの配置のみ。ベクターストア更新は自動。

再現性: リセット処理により何度でも動作検証可能。

拡張性: テーマ追加時も同様のフォルダ構造を適用するだけで対応可能。



上記の内容のRAGシステムを作成します。
学習のため、全てのコードを一度に提供するのはやめてください。
段階的に提供してください。
また、ソースコード提供時は、そのコードの説明もわかりやすくお願いします。